<!doctype html>
<html>
  <head>
    <title>Node Swap</title>
  </head>
  <body>
    <div id="1">
      <div id="4"></div>
      <div id="5">
        <div id="6"></div>
      </div>
    </div>
    <div id="2"></div>
    <div id="3">
      <div id="7"></div>
      <div id="8"></div>
      <div id="9"></div>
    </div>
  </body>
  <script>
    function nodeSwap(first, second) {
      let nodeOne = document.getElementById(String(first));
      let nodeTwo = document.getElementById(String(second));

      if (!nodeOne || 
          !nodeTwo ||
          nodeOne.contains(nodeTwo) ||
          nodeTwo.contains(nodeOne)) {
        return undefined; 
      }

      nodeOne.replaceWith(nodeTwo.cloneNode(true));
      nodeTwo.replaceWith(nodeOne.cloneNode(true));
      return true;
    }

    function nodeSwap(first, second) {
      let nodeOne = document.getElementById(String(first));
      let nodeTwo = document.getElementById(String(second));

      if (nodePairInvalid(nodeOne, nodeTwo)) {
        return undefined; 
      }

      let placeholderElement1 = document.createElement('p');
      let placeholderElement2 = document.createElement('p');

      nodeOne.insertAdjacentElement('beforebegin', placeholderElement1);
      nodeTwo.insertAdjacentElement('beforebegin', placeholderElement2);

      placeholderElement1.replaceWith(nodeTwo);
      placeholderElement2.replaceWith(nodeOne);
      return true;
    }

    function nodePairInvalid(nodeOne, nodeTwo) {
      return !nodeOne || 
             !nodeTwo ||
             nodeOne.contains(nodeTwo) ||
             nodeTwo.contains(nodeOne)
    }

    console.log(nodeSwap(2, 3));
    console.log(nodeSwap(1, 4));
    console.log(nodeSwap(9, 3));
    console.log(nodeSwap(1, 2));
  </script>
</html>
